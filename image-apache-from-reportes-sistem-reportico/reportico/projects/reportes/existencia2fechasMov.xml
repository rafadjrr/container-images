<?xml version="1.0"?><Report><ReportQuery><Format><ReportTitle>LISTADO Movimientos de Artículo entre dos fechas</ReportTitle><ReportDescription>Reporte que muestra la existencia de un Articulo. El saldo inicial es a la fecha del período mas cercano a la fecha inicial, luego se buscan todos los movimientos realizados entre las dos fechas y se calcula el inventario final</ReportDescription><PageSize>.DEFAULT</PageSize><PageOrientation>.DEFAULT</PageOrientation><TopMargin></TopMargin><BottomMargin></BottomMargin><RightMargin></RightMargin><LeftMargin></LeftMargin><AutoPaginate></AutoPaginate><PdfZoomFactor></PdfZoomFactor><HtmlZoomFactor></HtmlZoomFactor><PageTitleDisplay></PageTitleDisplay><PageLayout></PageLayout><pdfFont></pdfFont><pdfFontSize></pdfFontSize><PreExecuteCode>NONE</PreExecuteCode><formBetweenRows>solidline</formBetweenRows><gridDisplay>.DEFAULT</gridDisplay><gridSortable>.DEFAULT</gridSortable><gridSearchable>.DEFAULT</gridSearchable><gridPageable>.DEFAULT</gridPageable><gridPageSize>.DEFAULT</gridPageSize></Format><Datasource><SourceType>database</SourceType><SourceConnection><DatabaseType>mysql</DatabaseType><DatabaseName></DatabaseName><HostName></HostName><ServiceName></ServiceName><UserName></UserName><Password></Password></SourceConnection></Datasource><EntryForm><Query><TableSql></TableSql><WhereSql></WhereSql><GroupSql></GroupSql><RowSelection>all</RowSelection><SQL><QuerySql></QuerySql><SQLRaw>select b.ExistenciaFechaInic,CASE WHEN b.Entradas is null THEN 0 ELSE b.Entradas END as Entradas,CASE WHEN b.Salidas is null THEN 0 ELSE b.Salidas END as Salidas,CASE WHEN b.DevVentas is null THEN 0 ELSE b.DevVentas END as DevVentas,CASE WHEN b.DevCompras is null THEN 0 ELSE b.DevCompras END as DevCompras,CASE WHEN (b.Entradas - b.Salidas + b.DevVentas -b.DevCompras) is null THEN b.ExistenciaFechaInic ELSE   (b.ExistenciaFechaInic+ b.Entradas - b.Salidas + b.DevVentas -b.DevCompras) END AS ExistenciaFechaFinal
 from (
SELECT (select ( (CASE WHEN ( a.Entradas - a.Salidas + a.DevVentas -a.DevCompras)  is null THEN (a.SaldoPeriodo) ELSE (a.SaldoPeriodo+ a.Entradas - a.Salidas + a.DevVentas -a.DevCompras)  END)) 
 from (
SELECT (SELECT Anterior FROM dt02arti WHERE 1=1 [AND DT02ARTI.CodArticulo = {CodArticulo}] [AND CodAlmacen = {CodAlmacen}] [AND Medida = {Medida}] 
[and Periodo=(select periodo from mt01peco where  {FechaInicio} BETWEEN Fecha_Desde AND Fecha_Hasta)] ) as SaldoPeriodo,
       Sum((CASE WHEN (MT01MOVI.AfectaExistencias = 0 AND MT01MOVI.CompraVenta &lt;&gt; 1) THEN DT05FACT.Cantidad ELSE 0 END)) AS Entradas, 
       Sum((CASE WHEN (MT01MOVI.AfectaExistencias = 1 AND MT01MOVI.CompraVenta &lt;&gt; 0) THEN DT05FACT.Cantidad ELSE 0 END) ) AS Salidas,
       Sum((CASE WHEN (MT01MOVI.AfectaExistencias = 0 AND MT01MOVI.CompraVenta = 1) THEN DT05FACT.Cantidad ELSE 0 END)) AS DevVentas, 
       Sum((CASE WHEN (MT01MOVI.AfectaExistencias = 1 AND MT01MOVI.CompraVenta = 0) THEN DT05FACT.Cantidad ELSE 0 END)) AS DevCompras
            FROM 
                (EN01FACT INNER JOIN (DT05FACT INNER JOIN MT01MOVI     ON DT05FACT.CodMovimiento = MT01MOVI.Codigo)     ON (EN01FACT.Referencia = DT05FACT.Referencia)    AND (EN01FACT.CodMovimiento = DT05FACT.CodMovimiento))
                 WHERE 1=1 [AND DT05FACT.CodAlmacen ={CodAlmacen}]   [AND DT05FACT.CodArticulo ={CodArticulo}]   [AND DT05FACT.UnidadMedida ={Medida} ]
                 [AND EN01FACT.FechaMov BETWEEN (select Fecha_Desde from mt01peco where {FechaInicio} BETWEEN Fecha_Desde AND Fecha_Hasta) And DATEADD(dd,-1,{FechaInicio})]
                 )a) AS ExistenciaFechaInic,
       Sum((CASE WHEN (MT01MOVI.AfectaExistencias = 0 AND MT01MOVI.CompraVenta &lt;&gt; 1) THEN DT05FACT.Cantidad ELSE 0 END)) AS Entradas, 
       Sum((CASE WHEN (MT01MOVI.AfectaExistencias = 1 AND MT01MOVI.CompraVenta &lt;&gt; 0) THEN DT05FACT.Cantidad ELSE 0 END) ) AS Salidas,
       Sum((CASE WHEN (MT01MOVI.AfectaExistencias = 0 AND MT01MOVI.CompraVenta = 1) THEN DT05FACT.Cantidad ELSE 0 END)) AS DevVentas, 
       Sum((CASE WHEN (MT01MOVI.AfectaExistencias = 1 AND MT01MOVI.CompraVenta = 0) THEN DT05FACT.Cantidad ELSE 0 END)) AS DevCompras
            FROM  
                (EN01FACT INNER JOIN (DT05FACT INNER JOIN MT01MOVI     ON DT05FACT.CodMovimiento = MT01MOVI.Codigo)     ON (EN01FACT.Referencia = DT05FACT.Referencia)    AND (EN01FACT.CodMovimiento = DT05FACT.CodMovimiento))
                 WHERE 1=1 [AND DT05FACT.CodAlmacen ={CodAlmacen}]   [AND DT05FACT.CodArticulo ={CodArticulo}]  [AND DT05FACT.UnidadMedida ={Medida} ]  
                [ AND EN01FACT.FechaMov BETWEEN {FechaInicio} And {FechaSaldo}]
                 )b;</SQLRaw></SQL><QueryColumns><QueryColumn><Name>ExistenciaFechaInic</Name><TableName>b</TableName><ColumnName>ExistenciaFechaInic</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>show</column_display><content_type>plain</content_type><ColumnStartPDF></ColumnStartPDF><justify>center</justify><ColumnWidthPDF></ColumnWidthPDF><ColumnWidthHTML>17%</ColumnWidthHTML><column_title>INVENTARIO INICIAL</column_title><tooltip></tooltip><group_header_label>0</group_header_label><group_header_label_xpos></group_header_label_xpos><group_header_data_xpos></group_header_data_xpos><group_trailer_label>0</group_trailer_label></Format></QueryColumn><QueryColumn><Name>Entradas</Name><TableName></TableName><ColumnName>CASE WHEN b.Entradas is null THEN 0 ELSE b.Entradas END as</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>show</column_display><content_type>plain</content_type><ColumnStartPDF></ColumnStartPDF><justify>center</justify><ColumnWidthPDF></ColumnWidthPDF><ColumnWidthHTML>17%</ColumnWidthHTML><column_title>ENTRADAS</column_title><tooltip></tooltip><group_header_label>0</group_header_label><group_header_label_xpos></group_header_label_xpos><group_header_data_xpos></group_header_data_xpos><group_trailer_label>0</group_trailer_label></Format></QueryColumn><QueryColumn><Name>Salidas</Name><TableName></TableName><ColumnName>CASE WHEN b.Salidas is null THEN 0 ELSE b.Salidas END as</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>show</column_display><content_type>plain</content_type><ColumnStartPDF></ColumnStartPDF><justify>center</justify><ColumnWidthPDF></ColumnWidthPDF><ColumnWidthHTML>17%</ColumnWidthHTML><column_title>SALIDAS</column_title><tooltip></tooltip><group_header_label>0</group_header_label><group_header_label_xpos></group_header_label_xpos><group_header_data_xpos></group_header_data_xpos><group_trailer_label>0</group_trailer_label></Format></QueryColumn><QueryColumn><Name>DevVentas</Name><TableName></TableName><ColumnName>CASE WHEN b.DevVentas is null THEN 0 ELSE b.DevVentas END as</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>show</column_display><content_type>plain</content_type><ColumnStartPDF></ColumnStartPDF><justify>center</justify><ColumnWidthPDF></ColumnWidthPDF><ColumnWidthHTML>17%</ColumnWidthHTML><column_title>DEV. VENTAS</column_title><tooltip></tooltip><group_header_label>0</group_header_label><group_header_label_xpos></group_header_label_xpos><group_header_data_xpos></group_header_data_xpos><group_trailer_label>0</group_trailer_label></Format></QueryColumn><QueryColumn><Name>DevCompras</Name><TableName></TableName><ColumnName>CASE WHEN b.DevCompras is null THEN 0 ELSE b.DevCompras END as</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>show</column_display><content_type>plain</content_type><ColumnStartPDF></ColumnStartPDF><justify>center</justify><ColumnWidthPDF></ColumnWidthPDF><ColumnWidthHTML>16%</ColumnWidthHTML><column_title>DEV. COMPRAS</column_title><tooltip></tooltip><group_header_label>0</group_header_label><group_header_label_xpos></group_header_label_xpos><group_header_data_xpos></group_header_data_xpos><group_trailer_label>0</group_trailer_label></Format></QueryColumn><QueryColumn><Name>ExistenciaFechaFinal</Name><TableName></TableName><ColumnName>CASE WHEN (b.Entradas - b.Salidas + b.DevVentas -b.DevCompras) is null THEN b.ExistenciaFechaInic ELSE   (b.ExistenciaFechaInic+ b.Entradas - b.Salidas + b.DevVentas -b.DevCompras) END AS</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>show</column_display><content_type>plain</content_type><ColumnStartPDF></ColumnStartPDF><justify>center</justify><ColumnWidthPDF></ColumnWidthPDF><ColumnWidthHTML>16%</ColumnWidthHTML><column_title>INVENTARIO FINAL</column_title><tooltip></tooltip><group_header_label>0</group_header_label><group_header_label_xpos></group_header_label_xpos><group_header_data_xpos></group_header_data_xpos><group_trailer_label>0</group_trailer_label></Format></QueryColumn></QueryColumns><OrderColumns></OrderColumns><PreSQLS></PreSQLS></Query><Assignments></Assignments><Criteria><CriteriaItem><Name>FechaInicio</Name><Title>Fecha de Inicio</Title><QueryTableName></QueryTableName><QueryColumnName></QueryColumnName><CriteriaType>DATE</CriteriaType><CriteriaHelp></CriteriaHelp><CriteriaDisplay>NOINPUT</CriteriaDisplay><ExpandDisplay>NOINPUT</ExpandDisplay><CriteriaRequired></CriteriaRequired><CriteriaHidden></CriteriaHidden><CriteriaDisplayGroup></CriteriaDisplayGroup><ReturnColumn></ReturnColumn><DisplayColumn></DisplayColumn><OverviewColumn></OverviewColumn><MatchColumn></MatchColumn><CriteriaDefaults></CriteriaDefaults><CriteriaList></CriteriaList><Query><TableSql></TableSql><WhereSql></WhereSql><GroupSql></GroupSql><RowSelection></RowSelection><SQLRaw></SQLRaw><SQL><QuerySql></QuerySql></SQL><QueryColumns></QueryColumns><OrderColumns></OrderColumns><Assignments></Assignments></Query><CriteriaLinks></CriteriaLinks></CriteriaItem><CriteriaItem><Name>FechaSaldo</Name><Title>Existencia a la Fecha</Title><QueryTableName></QueryTableName><QueryColumnName></QueryColumnName><CriteriaType>DATE</CriteriaType><CriteriaHelp></CriteriaHelp><CriteriaDisplay>NOINPUT</CriteriaDisplay><ExpandDisplay>NOINPUT</ExpandDisplay><CriteriaRequired></CriteriaRequired><CriteriaHidden></CriteriaHidden><CriteriaDisplayGroup></CriteriaDisplayGroup><ReturnColumn></ReturnColumn><DisplayColumn></DisplayColumn><OverviewColumn></OverviewColumn><MatchColumn></MatchColumn><CriteriaDefaults></CriteriaDefaults><CriteriaList></CriteriaList><Query><TableSql></TableSql><WhereSql></WhereSql><GroupSql></GroupSql><RowSelection></RowSelection><SQLRaw></SQLRaw><SQL><QuerySql></QuerySql></SQL><QueryColumns></QueryColumns><OrderColumns></OrderColumns><Assignments></Assignments></Query><CriteriaLinks></CriteriaLinks></CriteriaItem><CriteriaItem><Name>CodArticulo</Name><Title>Articulo</Title><QueryTableName></QueryTableName><QueryColumnName></QueryColumnName><CriteriaType>LOOKUP</CriteriaType><CriteriaHelp></CriteriaHelp><CriteriaDisplay>DROPDOWN</CriteriaDisplay><ExpandDisplay>NOINPUT</ExpandDisplay><CriteriaRequired></CriteriaRequired><CriteriaHidden></CriteriaHidden><CriteriaDisplayGroup></CriteriaDisplayGroup><ReturnColumn>CodArticulo</ReturnColumn><DisplayColumn>Descripcion</DisplayColumn><OverviewColumn>CodArticulo</OverviewColumn><MatchColumn>CodArticulo</MatchColumn><CriteriaDefaults></CriteriaDefaults><CriteriaList></CriteriaList><Query><TableSql></TableSql><WhereSql></WhereSql><GroupSql></GroupSql><RowSelection></RowSelection><SQLRaw>SELECT CodArticulo ,concat(CodArticulo,'-',Descripcion) as Descripcion
FROM  en01arti
WHERE UniPrimaria&lt;&gt;'FAMILIA'</SQLRaw><SQL><QuerySql></QuerySql></SQL><QueryColumns><QueryColumn><Name>CodArticulo</Name><TableName></TableName><ColumnName>CodArticulo</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>show</column_display><content_type>plain</content_type><justify>left</justify></Format></QueryColumn><QueryColumn><Name>Descripcion</Name><TableName></TableName><ColumnName>concat(CodArticulo,'-',Descripcion) as</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>show</column_display><content_type>plain</content_type><justify>left</justify></Format></QueryColumn></QueryColumns><OrderColumns></OrderColumns><Assignments></Assignments></Query><CriteriaLinks></CriteriaLinks></CriteriaItem><CriteriaItem><Name>CodAlmacen</Name><Title>Almacen</Title><QueryTableName></QueryTableName><QueryColumnName></QueryColumnName><CriteriaType>LOOKUP</CriteriaType><CriteriaHelp></CriteriaHelp><CriteriaDisplay>DROPDOWN</CriteriaDisplay><ExpandDisplay>NOINPUT</ExpandDisplay><CriteriaRequired></CriteriaRequired><CriteriaHidden></CriteriaHidden><CriteriaDisplayGroup></CriteriaDisplayGroup><ReturnColumn>CodAlmacen</ReturnColumn><DisplayColumn>Descripcion</DisplayColumn><OverviewColumn>CodAlmacen</OverviewColumn><MatchColumn>CodAlmacen</MatchColumn><CriteriaDefaults></CriteriaDefaults><CriteriaList></CriteriaList><Query><TableSql></TableSql><WhereSql></WhereSql><GroupSql></GroupSql><RowSelection></RowSelection><SQLRaw>SELECT CodAlmacen,concat(CodAlmacen,'-',DesAlmacen) as Descripcion
FROM  mt01alma</SQLRaw><SQL><QuerySql></QuerySql></SQL><QueryColumns><QueryColumn><Name>CodAlmacen</Name><TableName></TableName><ColumnName>CodAlmacen</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>show</column_display><content_type>plain</content_type><justify>left</justify></Format></QueryColumn><QueryColumn><Name>Descripcion</Name><TableName></TableName><ColumnName>concat(CodAlmacen,'-',DesAlmacen) as</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>show</column_display><content_type>plain</content_type><justify>left</justify></Format></QueryColumn></QueryColumns><OrderColumns></OrderColumns><Assignments></Assignments></Query><CriteriaLinks></CriteriaLinks></CriteriaItem><CriteriaItem><Name>Medida</Name><Title>Medida</Title><QueryTableName></QueryTableName><QueryColumnName></QueryColumnName><CriteriaType>LOOKUP</CriteriaType><CriteriaHelp></CriteriaHelp><CriteriaDisplay>DROPDOWN</CriteriaDisplay><ExpandDisplay>NOINPUT</ExpandDisplay><CriteriaRequired></CriteriaRequired><CriteriaHidden></CriteriaHidden><CriteriaDisplayGroup></CriteriaDisplayGroup><ReturnColumn>Codigo</ReturnColumn><DisplayColumn>Descripcion</DisplayColumn><OverviewColumn>Codigo</OverviewColumn><MatchColumn>Codigo</MatchColumn><CriteriaDefaults></CriteriaDefaults><CriteriaList></CriteriaList><Query><TableSql></TableSql><WhereSql></WhereSql><GroupSql></GroupSql><RowSelection></RowSelection><SQLRaw>SELECT Descripcion as Codigo, Descripcion as Descripcion
FROM  mt01medi
WHERE Descripcion&lt;&gt;'FAMILIA'</SQLRaw><SQL><QuerySql></QuerySql></SQL><QueryColumns><QueryColumn><Name>Codigo</Name><TableName></TableName><ColumnName>Descripcion as</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>show</column_display><content_type>plain</content_type><justify>left</justify></Format></QueryColumn><QueryColumn><Name>Descripcion</Name><TableName></TableName><ColumnName>Descripcion as</ColumnName><ColumnType>char</ColumnType><ColumnLength>30</ColumnLength><Format><column_display>show</column_display><content_type>plain</content_type><justify>left</justify></Format></QueryColumn></QueryColumns><OrderColumns></OrderColumns><Assignments></Assignments></Query><CriteriaLinks></CriteriaLinks></CriteriaItem></Criteria><Output><PageHeaders></PageHeaders><PageFooters></PageFooters><DisplayOrders><DisplayOrder><ColumnName>ExistenciaFechaInic</ColumnName><OrderNumber>1</OrderNumber></DisplayOrder><DisplayOrder><ColumnName>Entradas</ColumnName><OrderNumber>2</OrderNumber></DisplayOrder><DisplayOrder><ColumnName>Salidas</ColumnName><OrderNumber>3</OrderNumber></DisplayOrder><DisplayOrder><ColumnName>DevVentas</ColumnName><OrderNumber>4</OrderNumber></DisplayOrder><DisplayOrder><ColumnName>DevCompras</ColumnName><OrderNumber>5</OrderNumber></DisplayOrder><DisplayOrder><ColumnName>ExistenciaFechaFinal</ColumnName><OrderNumber>6</OrderNumber></DisplayOrder></DisplayOrders><Groups><Group><GroupName>REPORT_BODY</GroupName><BeforeGroupHeader>blankline</BeforeGroupHeader><AfterGroupHeader>blankline</AfterGroupHeader><BeforeGroupTrailer>blankline</BeforeGroupTrailer><AfterGroupTrailer>blankline</AfterGroupTrailer><GroupHeaders></GroupHeaders><GroupTrailers></GroupTrailers></Group></Groups><Graphs></Graphs></Output></EntryForm></ReportQuery></Report>